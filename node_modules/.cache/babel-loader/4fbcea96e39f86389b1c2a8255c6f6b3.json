{"ast":null,"code":"import _defineProperty from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component,useState,useEffect,isValidElement}from'react';import{BrowserRouter as Router,Link,Route}from'react-router-dom';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import{DropzoneArea}from'material-ui-dropzone';import Checkbox from'@material-ui/core/Checkbox';import{withFirebase}from'../../Firebase';import{compose}from'recompose';import Grid from'@material-ui/core/Grid';import{withAuthorization,withAuthentication,AuthUserContext}from'../../Session';import{makeStyles}from'@material-ui/styles';import Autocomplete from'@material-ui/lab/Autocomplete';import{debug}from'util';import FormGroup from'@material-ui/core/FormGroup';import FormControlLabel from'@material-ui/core/FormControlLabel';import FormControl from'@material-ui/core/FormControl';import FormLabel from'@material-ui/core/FormLabel';import SingleLineError from'../../Error';import{Typography,Paper}from'@material-ui/core';import NullImage from'../No-Image-Available.jpg';//<Checkbox checked={isPublic} onChange={(e) => setIsPublic(e.target.checked)}/>\nvar useStyles=makeStyles(function(theme){return{directorySubtitle:{fontSize:12,marginTop:10,marginBottom:20},description:{marginTop:10,marginBottom:20,fontSize:15},previewImage:{width:'100%'},secondaryImage:{width:'100%'},spacer:{height:20},errorDiv:{marginTop:55},title:{marginTop:50,marginBottom:50},editButton:{marginTop:50,height:47,color:'#FFFFFF',backgroundColor:'#00B4F4',borderRadius:0,'&:hover':{backgroundColor:'#D6D6D6'}},cartButton:{height:47,width:300,color:'#FFFFFF',backgroundColor:'#00B4F4',borderRadius:0,'&:hover':{backgroundColor:'#D6D6D6'}},contentPaper:{marginLeft:25,marginTop:0},link:{textDecoration:\"none\"}};});// TODO: [Feature] Add support for categories without subCategories\nvar ProductDetails=function ProductDetails(props){var classes=useStyles();var categoryRef=props.firebase.categoryRef();var storageRef=props.firebase.storage;var _React$useState=React.useState(NullImage),_React$useState2=_slicedToArray(_React$useState,2),previewImage=_React$useState2[0],setPreviewImage=_React$useState2[1];var _React$useState3=React.useState(NullImage),_React$useState4=_slicedToArray(_React$useState3,2),subImageOne=_React$useState4[0],setSubImageOne=_React$useState4[1];var _React$useState5=React.useState(NullImage),_React$useState6=_slicedToArray(_React$useState5,2),subImageTwo=_React$useState6[0],setSubImageTwo=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),product=_React$useState8[0],setProduct=_React$useState8[1];// Store the cart data in browser storage\n// There's no reason for it to be stored in the db for now\nvar addItemToCart=function addItemToCart(product){var cart=localStorage.getItem('cart');var cartObj=!!cart&&!!JSON.parse(cart)?JSON.parse(cart):[];var productId=cartObj.findIndex(function(x){return x.key==props.match.params.productId;});if(productId==-1)cartObj.push(_objectSpread({},product,{key:props.match.params.productId}));console.log(cartObj);localStorage.setItem('cart',JSON.stringify(cartObj));};useEffect(function(){//TODO:[Feature] Add support for multiple admins editing at the same time\nprops.firebase.product(props.match.params.productId).once(\"value\",function(snapshot){if(!snapshot.exists()){props.history.push('/404');}else{// Get urls for each image\nstorageRef.ref().child(snapshot.val().previewImage).getDownloadURL().then(function(url){setPreviewImage(url);}).catch(function(err){return setPreviewImage(NullImage);});storageRef.ref().child(snapshot.val().subImageOne).getDownloadURL().then(function(url){setSubImageOne(url);}).catch(function(err){return setSubImageOne(NullImage);});storageRef.ref().child(snapshot.val().subImageTwo).getDownloadURL().then(function(url){setSubImageTwo(url);}).catch(function(err){return setSubImageTwo(NullImage);});console.log(snapshot.val());setProduct(snapshot.val());}});},[props.match.params.productId]);if(!product){return null;}return React.createElement(React.Fragment,null,React.createElement(\"form\",{onSubmit:true},React.createElement(Grid,{container:true,spacing:0},React.createElement(Grid,{item:true,xs:6,spacing:0},React.createElement(\"img\",{src:previewImage,className:classes.previewImage,filesLimit:1}),React.createElement(Grid,{container:true,spacing:0},React.createElement(Grid,{item:true,xs:6},React.createElement(\"img\",{src:previewImage,className:classes.secondaryImage})),React.createElement(Grid,{item:true,xs:6},React.createElement(\"img\",{src:previewImage,className:classes.secondaryImage})))),React.createElement(Grid,{item:true,xs:4},React.createElement(\"div\",{className:classes.contentPaper},React.createElement(Typography,{className:classes.directorySubtitle},product.category,\" > \",product.subCategory),React.createElement(Typography,{variant:\"h4\"},product.name),React.createElement(Typography,{variant:\"h6\"},product.model),React.createElement(Typography,{className:classes.description},\" \",product.description),React.createElement(Grid,{container:true,alignItems:\"center\"},React.createElement(Grid,{item:true,xs:6},React.createElement(Typography,{variant:\"h5\"},product.price,\" \\u0433\\u0440\\u043D/\\u043D\\u0456\\u0447\")),React.createElement(Grid,{item:true,xs:6},React.createElement(Button,{className:classes.cartButton,onClick:function onClick(e){addItemToCart(product);}},\"\\u0417\\u0430\\u0431\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u0442\\u0438\"))),React.createElement(AuthUserContext.Consumer,null,function(authUser){return!!authUser&&authUser.isAdmin&&React.createElement(React.Fragment,null,React.createElement(Grid,{item:true,xs:6},React.createElement(Link,{className:classes.link,to:\"/products/edit/\".concat(props.match.params.productId)},React.createElement(Button,{className:classes.editButton},\"Edit\"))));}))),React.createElement(Grid,{item:true,xs:2}))));};export default compose(withFirebase,withAuthentication)(ProductDetails);","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Product/Details/index.js"],"names":["React","Component","useState","useEffect","isValidElement","BrowserRouter","Router","Link","Route","TextField","Button","DropzoneArea","Checkbox","withFirebase","compose","Grid","withAuthorization","withAuthentication","AuthUserContext","makeStyles","Autocomplete","debug","FormGroup","FormControlLabel","FormControl","FormLabel","SingleLineError","Typography","Paper","NullImage","useStyles","theme","directorySubtitle","fontSize","marginTop","marginBottom","description","previewImage","width","secondaryImage","spacer","height","errorDiv","title","editButton","color","backgroundColor","borderRadius","cartButton","contentPaper","marginLeft","link","textDecoration","ProductDetails","props","classes","categoryRef","firebase","storageRef","storage","setPreviewImage","subImageOne","setSubImageOne","subImageTwo","setSubImageTwo","product","setProduct","addItemToCart","cart","localStorage","getItem","cartObj","JSON","parse","productId","findIndex","x","key","match","params","push","console","log","setItem","stringify","once","snapshot","exists","history","ref","child","val","getDownloadURL","then","url","catch","err","category","subCategory","name","model","price","e","authUser","isAdmin"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect, isValidElement } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\n\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport {DropzoneArea} from 'material-ui-dropzone'\n\nimport Checkbox from '@material-ui/core/Checkbox'\nimport { withFirebase } from '../../Firebase';\nimport { compose } from 'recompose';\nimport Grid from '@material-ui/core/Grid'\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../../Session';\nimport { makeStyles } from '@material-ui/styles';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { debug } from 'util';\n\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport SingleLineError from '../../Error'\nimport { Typography, Paper } from '@material-ui/core';\nimport NullImage from '../No-Image-Available.jpg';\n\n//<Checkbox checked={isPublic} onChange={(e) => setIsPublic(e.target.checked)}/>\n\nconst useStyles = makeStyles(theme => ({\n\n  directorySubtitle:{\n    fontSize:12,\n    marginTop:10,\n    marginBottom:20\n  },\n\n  description:{\n    marginTop:10,\n    marginBottom:20,\n    fontSize:15,\n  },\n\n  previewImage:{\n    width:'100%',\n  },\n  secondaryImage:{\n    width:'100%',\n  },\n  spacer:{\n    height:20\n  },\n  errorDiv:{\n    marginTop:55,\n  },\n  title:{\n    marginTop:50,\n    marginBottom:50,\n  },\n  editButton:{   \n    marginTop:50, \n    height:47,\n    color: '#FFFFFF',\n    backgroundColor: '#00B4F4',\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: '#D6D6D6'\n    }\n  },\n  cartButton:{\n    height:47,\n    width:300,\n    color: '#FFFFFF',\n    backgroundColor: '#00B4F4',\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: '#D6D6D6'\n    }\n  },\n  contentPaper:{\n    marginLeft:25,\n    marginTop:0\n  },\n  link:{\n    textDecoration: \"none\",\n  }\n}));\n\n// TODO: [Feature] Add support for categories without subCategories\nconst ProductDetails = (props) => {\n\n  const classes = useStyles();\n  const categoryRef = props.firebase.categoryRef();\n  const storageRef = props.firebase.storage;\n\n\n  const [previewImage, setPreviewImage] = React.useState(NullImage);\n  const [subImageOne, setSubImageOne] = React.useState(NullImage);\n  const [subImageTwo, setSubImageTwo] = React.useState(NullImage);\n  const [product, setProduct] = React.useState(null);\n\n    // Store the cart data in browser storage\n  // There's no reason for it to be stored in the db for now\n  const addItemToCart = (product) => {\n    let cart = localStorage.getItem('cart');\n    let cartObj = !!cart && !!JSON.parse(cart) ? JSON.parse(cart) : [];\n\n\n    let productId = cartObj.findIndex(x => x.key == props.match.params.productId);\n\n    if(productId == -1)\n      cartObj.push({...product, key:props.match.params.productId});\n\n    console.log(cartObj);\n\n    localStorage.setItem('cart',  JSON.stringify(cartObj))\n  }\n\n  useEffect(() => {\n    \n\n\n    //TODO:[Feature] Add support for multiple admins editing at the same time\n    props.firebase.product(props.match.params.productId)\n      .once(\"value\", (snapshot) => {\n        \n        if(!snapshot.exists()){\n          props.history.push('/404');\n        }\n        else {\n          // Get urls for each image\n          storageRef.ref().child(snapshot.val().previewImage).getDownloadURL().then((url) => {\n            setPreviewImage(url)\n          }).catch(err => setPreviewImage(NullImage))\n\n          storageRef.ref().child(snapshot.val().subImageOne).getDownloadURL().then((url) => {\n            setSubImageOne(url)\n          }).catch(err => setSubImageOne(NullImage))\n\n          storageRef.ref().child(snapshot.val().subImageTwo).getDownloadURL().then((url) => {\n            setSubImageTwo(url)\n          }).catch(err => setSubImageTwo(NullImage))\n\n          console.log(snapshot.val());\n\n          setProduct(snapshot.val());\n\n        }\n\n    });\n\n  }, [props.match.params.productId]);\n\n  if(!product){\n    return(null);\n  }\n\n  return(\n    <React.Fragment>\n      <form onSubmit>\n        <Grid container spacing={0} >\n   \n          <Grid item xs={6} spacing={0}>\n            <img src={previewImage} className={classes.previewImage} filesLimit={1}/>\n            <Grid container spacing={0}>       \n                <Grid item xs={6}>\n                <img src={previewImage} className={classes.secondaryImage}/>\n                </Grid>\n                <Grid item xs={6}>\n                <img src={previewImage}className={classes.secondaryImage}/>\n                </Grid>          \n            </Grid>\n          </Grid>\n\n          <Grid item xs={4} >\n            <div className={classes.contentPaper}>\n              <Typography className={classes.directorySubtitle}>{product.category} > {product.subCategory}</Typography>\n              <Typography variant=\"h4\">{product.name}</Typography>\n              <Typography variant=\"h6\">{product.model}</Typography>\n              <Typography className={classes.description}> {product.description}</Typography>\n\n              <Grid container alignItems=\"center\">\n                <Grid item xs={6}>\n                  <Typography variant=\"h5\" >{product.price} грн/ніч</Typography>\n                </Grid>\n                <Grid item xs={6}>\n                    <Button className={classes.cartButton} onClick={(e) => {addItemToCart(product)}}>Забронювати</Button>\n                </Grid>\n              </Grid>\n\n              <AuthUserContext.Consumer>\n                {authUser =>(\n                !!authUser && authUser.isAdmin && \n                  <React.Fragment>\n                  <Grid item xs={6}>\n                    <Link  className={classes.link} to={`/products/edit/${props.match.params.productId}`}>\n                      <Button className={classes.editButton}>Edit</Button>\n                    </Link>                \n                  </Grid>\n                  </React.Fragment>\n\n                \n              )}\n              </AuthUserContext.Consumer>\n\n\n              \n              \n            </div>\n          </Grid>\n          <Grid item xs = {2}>\n\n          </Grid>\n\n        \n        </Grid>\n        \n\n          \n\n      </form>\n    </React.Fragment>\n  );\n}\n\nexport default compose(withFirebase, withAuthentication)(ProductDetails);"]},"metadata":{},"sourceType":"module"}