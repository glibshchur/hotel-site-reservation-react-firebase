{"ast":null,"code":"import _defineProperty from \"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/hshchu/Desktop/github/e-commerce/src/components/Product/Details/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component, useState, useEffect, isValidElement } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { withFirebase } from '../../Firebase';\nimport { compose } from 'recompose';\nimport Grid from '@material-ui/core/Grid';\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../../Session';\nimport { makeStyles } from '@material-ui/styles';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { debug } from 'util';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport SingleLineError from '../../Error';\nimport { Typography, Paper } from '@material-ui/core';\nimport NullImage from '../No-Image-Available.jpg';\nimport NullImage1 from '../ni.jpeg'; //<Checkbox checked={isPublic} onChange={(e) => setIsPublic(e.target.checked)}/>\n\nconst useStyles = makeStyles(theme => ({\n  directorySubtitle: {\n    fontSize: 12,\n    marginTop: 10,\n    marginBottom: 20\n  },\n  description: {\n    marginTop: 10,\n    marginBottom: 20,\n    fontSize: 15\n  },\n  previewImage: {\n    width: '100%'\n  },\n  secondaryImage: {\n    width: '100%'\n  },\n  spacer: {\n    height: 20\n  },\n  errorDiv: {\n    marginTop: 55\n  },\n  title: {\n    marginTop: 50,\n    marginBottom: 50\n  },\n  editButton: {\n    marginTop: 50,\n    height: 47,\n    color: '#FFFFFF',\n    backgroundColor: '#00B4F4',\n    borderRadius: 0,\n    '&:hover': {\n      backgroundColor: '#D6D6D6'\n    }\n  },\n  cartButton: {\n    height: 47,\n    width: 300,\n    color: '#FFFFFF',\n    backgroundColor: '#00B4F4',\n    borderRadius: 0,\n    '&:hover': {\n      backgroundColor: '#D6D6D6'\n    }\n  },\n  contentPaper: {\n    marginLeft: 25,\n    marginTop: 0\n  },\n  link: {\n    textDecoration: \"none\"\n  }\n})); // TODO: [Feature] Add support for categories without subCategories\n\nconst ProductDetails = props => {\n  const classes = useStyles();\n  const categoryRef = props.firebase.categoryRef();\n  const storageRef = props.firebase.storage;\n\n  const _React$useState = React.useState(NullImage1),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        previewImage = _React$useState2[0],\n        setPreviewImage = _React$useState2[1];\n\n  const _React$useState3 = React.useState(NullImage1),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        subImageOne = _React$useState4[0],\n        setSubImageOne = _React$useState4[1];\n\n  const _React$useState5 = React.useState(NullImage1),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        subImageTwo = _React$useState6[0],\n        setSubImageTwo = _React$useState6[1];\n\n  const _React$useState7 = React.useState(null),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        product = _React$useState8[0],\n        setProduct = _React$useState8[1]; // Store the cart data in browser storage\n  // There's no reason for it to be stored in the db for now\n\n\n  const addItemToCart = product => {\n    let cart = localStorage.getItem('cart');\n    let cartObj = !!cart && !!JSON.parse(cart) ? JSON.parse(cart) : [];\n    let productId = cartObj.findIndex(x => x.key == props.match.params.productId);\n    if (productId == -1) cartObj.push(_objectSpread({}, product, {\n      key: props.match.params.productId\n    }));\n    console.log(cartObj);\n    localStorage.setItem('cart', JSON.stringify(cartObj));\n  };\n\n  useEffect(() => {\n    //TODO:[Feature] Add support for multiple admins editing at the same time\n    props.firebase.product(props.match.params.productId).once(\"value\", snapshot => {\n      if (!snapshot.exists()) {\n        props.history.push('/404');\n      } else {\n        // Get urls for each image\n        storageRef.ref().child(snapshot.val().previewImage).getDownloadURL().then(url => {\n          setPreviewImage(url);\n        });\n        storageRef.ref().child(snapshot.val().subImageOne).getDownloadURL().then(url => {\n          setSubImageOne(url);\n        });\n        storageRef.ref().child(snapshot.val().subImageTwo).getDownloadURL().then(url => {\n          setSubImageTwo(url);\n        });\n        storageRef.ref().child(snapshot.val().previewImage).getDownloadURL().then(url => {\n          setPreviewImage(url);\n        }).catch(err => setPreviewImage(NullImage1));\n        storageRef.ref().child(snapshot.val().subImageOne).getDownloadURL().then(url => {\n          setSubImageOne(url);\n        }).catch(err => setSubImageOne(NullImage1));\n        storageRef.ref().child(snapshot.val().subImageTwo).getDownloadURL().then(url => {\n          setSubImageTwo(url);\n        }).catch(err => setSubImageTwo(NullImage1));\n        console.log(snapshot.val());\n        setProduct(snapshot.val());\n      }\n    });\n  }, [props.match.params.productId]);\n\n  if (!product) {\n    return null;\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    spacing: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    spacing: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: previewImage,\n    className: classes.previewImage,\n    filesLimit: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    container: true,\n    spacing: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: previewImage,\n    className: classes.secondaryImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: previewImage,\n    className: classes.secondaryImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  })))), React.createElement(Grid, {\n    item: true,\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.contentPaper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.directorySubtitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, product.category, \" > \", product.subCategory), React.createElement(Typography, {\n    variant: \"h4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, product.name), React.createElement(Typography, {\n    variant: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, product.model), React.createElement(Typography, {\n    className: classes.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \" \", product.description), React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, product.price, \" \\u0433\\u0440\\u043D/\\u043D\\u0456\\u0447\")), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: classes.cartButton,\n    onClick: e => {\n      addItemToCart(product);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u0431\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u0442\\u0438\"))), React.createElement(AuthUserContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, authUser => !!authUser && authUser.isAdmin && React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: classes.link,\n    to: \"/products/edit/\".concat(props.match.params.productId),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: classes.editButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, \"Edit\"))))))), React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }))));\n};\n\nexport default compose(withFirebase, withAuthentication)(ProductDetails);","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Product/Details/index.js"],"names":["React","Component","useState","useEffect","isValidElement","BrowserRouter","Router","Link","Route","TextField","Button","DropzoneArea","Checkbox","withFirebase","compose","Grid","withAuthorization","withAuthentication","AuthUserContext","makeStyles","Autocomplete","debug","FormGroup","FormControlLabel","FormControl","FormLabel","SingleLineError","Typography","Paper","NullImage","NullImage1","useStyles","theme","directorySubtitle","fontSize","marginTop","marginBottom","description","previewImage","width","secondaryImage","spacer","height","errorDiv","title","editButton","color","backgroundColor","borderRadius","cartButton","contentPaper","marginLeft","link","textDecoration","ProductDetails","props","classes","categoryRef","firebase","storageRef","storage","setPreviewImage","subImageOne","setSubImageOne","subImageTwo","setSubImageTwo","product","setProduct","addItemToCart","cart","localStorage","getItem","cartObj","JSON","parse","productId","findIndex","x","key","match","params","push","console","log","setItem","stringify","once","snapshot","exists","history","ref","child","val","getDownloadURL","then","url","catch","err","category","subCategory","name","model","price","e","authUser","isAdmin"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect, isValidElement } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\n\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport {DropzoneArea} from 'material-ui-dropzone'\n\nimport Checkbox from '@material-ui/core/Checkbox'\nimport { withFirebase } from '../../Firebase';\nimport { compose } from 'recompose';\nimport Grid from '@material-ui/core/Grid'\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../../Session';\nimport { makeStyles } from '@material-ui/styles';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { debug } from 'util';\n\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport SingleLineError from '../../Error'\nimport { Typography, Paper } from '@material-ui/core';\nimport NullImage from '../No-Image-Available.jpg';\nimport NullImage1 from '../ni.jpeg';\n\n//<Checkbox checked={isPublic} onChange={(e) => setIsPublic(e.target.checked)}/>\n\nconst useStyles = makeStyles(theme => ({\n\n  directorySubtitle:{\n    fontSize:12,\n    marginTop:10,\n    marginBottom:20\n  },\n\n  description:{\n    marginTop:10,\n    marginBottom:20,\n    fontSize:15,\n  },\n\n  previewImage:{\n    width:'100%',\n  },\n  secondaryImage:{\n    width:'100%',\n  },\n  spacer:{\n    height:20\n  },\n  errorDiv:{\n    marginTop:55,\n  },\n  title:{\n    marginTop:50,\n    marginBottom:50,\n  },\n  editButton:{   \n    marginTop:50, \n    height:47,\n    color: '#FFFFFF',\n    backgroundColor: '#00B4F4',\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: '#D6D6D6'\n    }\n  },\n  cartButton:{\n    height:47,\n    width:300,\n    color: '#FFFFFF',\n    backgroundColor: '#00B4F4',\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: '#D6D6D6'\n    }\n  },\n  contentPaper:{\n    marginLeft:25,\n    marginTop:0\n  },\n  link:{\n    textDecoration: \"none\",\n  }\n}));\n\n// TODO: [Feature] Add support for categories without subCategories\nconst ProductDetails = (props) => {\n\n  const classes = useStyles();\n  const categoryRef = props.firebase.categoryRef();\n  const storageRef = props.firebase.storage;\n\n\n  const [previewImage, setPreviewImage] = React.useState(NullImage1);\n  const [subImageOne, setSubImageOne] = React.useState(NullImage1);\n  const [subImageTwo, setSubImageTwo] = React.useState(NullImage1);\n  const [product, setProduct] = React.useState(null);\n\n    // Store the cart data in browser storage\n  // There's no reason for it to be stored in the db for now\n  const addItemToCart = (product) => {\n    let cart = localStorage.getItem('cart');\n    let cartObj = !!cart && !!JSON.parse(cart) ? JSON.parse(cart) : [];\n\n\n    let productId = cartObj.findIndex(x => x.key == props.match.params.productId);\n\n    if(productId == -1)\n      cartObj.push({...product, key:props.match.params.productId});\n\n    console.log(cartObj);\n\n    localStorage.setItem('cart',  JSON.stringify(cartObj))\n  }\n\n  useEffect(() => {\n    \n\n\n    //TODO:[Feature] Add support for multiple admins editing at the same time\n    props.firebase.product(props.match.params.productId)\n      .once(\"value\", (snapshot) => {\n        \n        if(!snapshot.exists()){\n          props.history.push('/404');\n        }\n        else {\n          // Get urls for each image\n\n          storageRef.ref().child(snapshot.val().previewImage).getDownloadURL().then((url) => {\n            setPreviewImage(url)\n          })\n\n          storageRef.ref().child(snapshot.val().subImageOne).getDownloadURL().then((url) => {\n            setSubImageOne(url)\n          })\n          storageRef.ref().child(snapshot.val().subImageTwo).getDownloadURL().then((url) => {\n            setSubImageTwo(url)\n          })\n\n          storageRef.ref().child(snapshot.val().previewImage).getDownloadURL().then((url) => {\n            setPreviewImage(url)\n          }).catch(err => setPreviewImage(NullImage1))\n\n          storageRef.ref().child(snapshot.val().subImageOne).getDownloadURL().then((url) => {\n            setSubImageOne(url)\n          }).catch(err => setSubImageOne(NullImage1))\n\n          storageRef.ref().child(snapshot.val().subImageTwo).getDownloadURL().then((url) => {\n            setSubImageTwo(url)\n          }).catch(err => setSubImageTwo(NullImage1))\n\n          console.log(snapshot.val());\n\n          setProduct(snapshot.val());\n\n        }\n\n    });\n\n  }, [props.match.params.productId]);\n\n  if(!product){\n    return(null);\n  }\n\n  return(\n    <React.Fragment>\n      <form onSubmit>\n        <Grid container spacing={0} >\n   \n          <Grid item xs={6} spacing={0}>\n            <img src={previewImage} className={classes.previewImage} filesLimit={1}/>\n            <Grid container spacing={0}>       \n                <Grid item xs={6}>\n                <img src={previewImage} className={classes.secondaryImage}/>\n                </Grid>\n                <Grid item xs={6}>\n                <img src={previewImage}className={classes.secondaryImage}/>\n                </Grid>          \n            </Grid>\n          </Grid>\n\n          <Grid item xs={4} >\n            <div className={classes.contentPaper}>\n              <Typography className={classes.directorySubtitle}>{product.category} > {product.subCategory}</Typography>\n              <Typography variant=\"h4\">{product.name}</Typography>\n              <Typography variant=\"h6\">{product.model}</Typography>\n              <Typography className={classes.description}> {product.description}</Typography>\n\n              <Grid container alignItems=\"center\">\n                <Grid item xs={6}>\n                  <Typography variant=\"h5\" >{product.price} грн/ніч</Typography>\n                </Grid>\n                <Grid item xs={6}>\n                    <Button className={classes.cartButton} onClick={(e) => {addItemToCart(product)}}>Забронювати</Button>\n                </Grid>\n              </Grid>\n\n              <AuthUserContext.Consumer>\n                {authUser =>(\n                !!authUser && authUser.isAdmin && \n                  <React.Fragment>\n                  <Grid item xs={6}>\n                    <Link  className={classes.link} to={`/products/edit/${props.match.params.productId}`}>\n                      <Button className={classes.editButton}>Edit</Button>\n                    </Link>                \n                  </Grid>\n                  </React.Fragment>\n\n                \n              )}\n              </AuthUserContext.Consumer>\n\n\n              \n              \n            </div>\n          </Grid>\n          <Grid item xs = {2}>\n\n          </Grid>\n\n        \n        </Grid>\n        \n\n          \n\n      </form>\n    </React.Fragment>\n  );\n}\n\nexport default compose(withFirebase, withAuthentication)(ProductDetails);"]},"metadata":{},"sourceType":"module"}