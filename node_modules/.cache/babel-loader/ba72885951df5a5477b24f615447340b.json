{"ast":null,"code":"import _toConsumableArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import{BrowserRouter as Router,Link,Route}from'react-router-dom';import{makeStyles}from'@material-ui/core/styles';import{compose}from'recompose';import{withAuthorization,withAuthentication,AuthUserContext}from'../Session';import{withFirebase}from'../Firebase';import ClickAwayListener from'@material-ui/core/ClickAwayListener';import Drawer from'@material-ui/core/Drawer';import List from'@material-ui/core/List';import Divider from'@material-ui/core/Divider';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import TextField from'@material-ui/core/TextField';import SubCategoryDrawer from'./SubCategoryDrawer';import NewCategoryButton from'./NewCategoryButton';import Logo from\"./logo.svg\";import Typography from'@material-ui/core/Typography';import HighlightOffIcon from'@material-ui/icons/HighlightOff';import Button from'@material-ui/core/Button';import VisibilityOffOutlinedIcon from'@material-ui/icons/VisibilityOffOutlined';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemSecondaryAction from'@material-ui/core/ListItemSecondaryAction';import IconButton from'@material-ui/core/IconButton';import VisibilityOutlinedIcon from'@material-ui/icons/VisibilityOutlined';var useStyles=makeStyles(function(theme){return{drawer:{width:300,flexShrink:0},drawerPaper:{marginTop:0,width:300,backgroundColor:\"#00c3d9\",borderRight:0},logo:{marginTop:20,marginRight:40,marginLeft:30},navList:{marginTop:110},link:{textDecoration:\"none\"},navButton:{color:\"#ffffff\",marginLeft:30},adminNavButton:{color:\"#ffffff\",marginLeft:30},icon:{minWidth:15,miHeight:15,width:15,height:15},buttons:{height:25,minWidth:25,width:25,margin:0,marginLeft:5,color:\"#ffffff\",borderRadius:0,'&:hover':{backgroundColor:'rgba(255,255,255,0)',color:'#ffffff'}}};});var SideNavigationDrawer=function SideNavigationDrawer(props){var classes=useStyles();var categoryRef=props.firebase.categoryRef();var el=useRef(null);// ref to the sub nav\nvar _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),categories=_React$useState2[0],setCategories=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),subCategoriesOpen=_React$useState4[0],setSubCategoriesOpen=_React$useState4[1];var _React$useState5=React.useState({}),_React$useState6=_slicedToArray(_React$useState5,2),selectedCategory=_React$useState6[0],setSelectedCategory=_React$useState6[1];var handleClick=function handleClick(e){// close the subnav if we click away\nif(!el.current.contains(e.target)){setSubCategoriesOpen(false);}};var refreshCategories=function refreshCategories(){setCategories([]);categoryRef.once(\"value\",function(snapshot,prevChildKey){snapshot.forEach(function(ss){return setCategories(function(x){return[].concat(_toConsumableArray(x),[{name:ss.key,key:ss.key,visible:ss.val().visible}]);});});});};useEffect(function(){document.addEventListener('mousedown',handleClick,false);var ca=categoryRef.on(\"child_added\",function(snapshot,prevChildKey){setCategories(function(x){return[].concat(_toConsumableArray(x),[{name:snapshot.key,key:snapshot.key,visible:snapshot.val().visible}]);});});var cr=categoryRef.on(\"child_removed\",function(snapshot){refreshCategories();});//TODO: [Functionality] Update child state\nvar cc=categoryRef.on(\"child_changed\",function(snapshot){refreshCategories();});return function(){categoryRef.off(\"child_added\",ca);categoryRef.off(\"child_removed\",cr);categoryRef.off(\"child_changed\",cc);document.removeEventListener('mousedown',handleClick,false);};},[]);var openSubCategoryDrawer=function openSubCategoryDrawer(cat){setSubCategoriesOpen(true);setSelectedCategory(cat);};return React.createElement(\"div\",{ref:el},React.createElement(Drawer,{className:classes.drawer,variant:\"permanent\",classes:{paper:classes.drawerPaper},anchor:\"left\",boxShadow:5},React.createElement(Link,{to:\"/\",style:{textDecoration:'none'}},React.createElement(Typography,{variant:\"h4\",className:classes.navButton},\" Best For Rest \")),React.createElement(List,{className:classes.navList,dense:\"true\"},categories.map(function(category,index){return React.createElement(AuthUserContext.Consumer,{key:category.key},function(authUser){if((!!authUser&&!authUser.isAdmin||!!!authUser)&&category.visible)return React.createElement(ListItem,{button:true,key:category.key,onClick:function onClick(){openSubCategoryDrawer(category);}},React.createElement(Typography,{variant:\"h6\",className:classes.navButton},\" \",category.name,\" \"));else if(!!authUser&&authUser.isAdmin)return React.createElement(ListItem,{button:true,key:category.key,onClick:function onClick(){openSubCategoryDrawer(category);}},React.createElement(Typography,{variant:\"h6\",className:classes.navButton},\" \",category.name,\" \"),React.createElement(ListItemSecondaryAction,null,category.visible&&React.createElement(Button,{className:classes.buttons,onClick:function onClick(e){props.firebase.setCategoryVisible(category.name,null,false);}},React.createElement(VisibilityOutlinedIcon,null)),!category.visible&&React.createElement(Button,{className:classes.buttons,onClick:function onClick(e){props.firebase.setCategoryVisible(category.name,null,true);}},React.createElement(VisibilityOffOutlinedIcon,null)),React.createElement(Button,{className:classes.buttons,onClick:function onClick(e){props.firebase.deleteCategory(category.name,null);}},React.createElement(HighlightOffIcon,null))));});}),React.createElement(AuthUserContext.Consumer,null,function(authUser){return!!authUser&&authUser.isAdmin&&React.createElement(NewCategoryButton,null);})),React.createElement(Divider,null),React.createElement(List,null,React.createElement(AuthUserContext.Consumer,null,function(authUser){if(authUser&&authUser.isAdmin)return React.createElement(React.Fragment,null,React.createElement(Link,{to:\"/archive\",className:classes.link},React.createElement(ListItem,{button:true,key:\"Archive\"},React.createElement(Typography,{variant:\"h6\",className:classes.adminNavButton},\"\\u0410\\u0440\\u0445\\u0456\\u0432 \\u041D\\u043E\\u043C\\u0435\\u0440\\u0456\\u0432\"))),React.createElement(Link,{to:\"/dashboard\",className:classes.link},React.createElement(ListItem,{button:true,key:\"Dashboard\"},React.createElement(Typography,{variant:\"h6\",className:classes.adminNavButton},\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0456 \\u0431\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F\"))),React.createElement(Link,{to:\"/create\",className:classes.link},React.createElement(ListItem,{button:true,key:\"New Product\"},React.createElement(Typography,{variant:\"h6\",className:classes.adminNavButton},\"\\u0421\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438 \\u041D\\u043E\\u0432\\u0438\\u0439 \\u041D\\u043E\\u043C\\u0435\\u0440\"))));else return React.createElement(React.Fragment,null,React.createElement(Link,{to:\"/contact\",className:classes.link},React.createElement(ListItem,{button:true,key:\"Archive\"},React.createElement(Typography,{variant:\"h6\",className:classes.adminNavButton},\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0438\"))),React.createElement(Link,{to:\"/account\",className:classes.link},React.createElement(ListItem,{button:true,key:\"\\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F\"},React.createElement(Typography,{variant:\"h6\",className:classes.adminNavButton},\"\\u041E\\u0431\\u043B\\u0456\\u043A\\u043E\\u0432\\u0438\\u0439 \\u0437\\u0430\\u043F\\u0438\\u0441\"))),React.createElement(Link,{to:\"/checkout\",className:classes.link},React.createElement(ListItem,{button:true,key:\"New Product\"},React.createElement(Typography,{variant:\"h6\",className:classes.adminNavButton},\"\\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F\"))));}))),React.createElement(SubCategoryDrawer,{open:subCategoriesOpen,category:selectedCategory.name}));};export default compose(withAuthentication)(SideNavigationDrawer);","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Navigation/index.js"],"names":["React","useEffect","useState","useRef","BrowserRouter","Router","Link","Route","makeStyles","compose","withAuthorization","withAuthentication","AuthUserContext","withFirebase","ClickAwayListener","Drawer","List","Divider","ListItem","ListItemText","TextField","SubCategoryDrawer","NewCategoryButton","Typography","HighlightOffIcon","Button","VisibilityOffOutlinedIcon","ListItemIcon","ListItemSecondaryAction","IconButton","VisibilityOutlinedIcon","useStyles","theme","drawer","width","flexShrink","drawerPaper","marginTop","backgroundColor","borderRight","logo","marginRight","marginLeft","navList","link","textDecoration","navButton","color","adminNavButton","icon","minWidth","miHeight","height","buttons","margin","borderRadius","SideNavigationDrawer","props","classes","categoryRef","firebase","el","categories","setCategories","subCategoriesOpen","setSubCategoriesOpen","selectedCategory","setSelectedCategory","handleClick","e","current","contains","target","refreshCategories","once","snapshot","prevChildKey","forEach","ss","x","name","key","visible","val","document","addEventListener","ca","on","cr","cc","off","removeEventListener","openSubCategoryDrawer","cat","paper","map","category","index","authUser","isAdmin","setCategoryVisible","deleteCategory"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose'\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../Session'\nimport { withFirebase } from '../Firebase'\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TextField from '@material-ui/core/TextField';\nimport SubCategoryDrawer from './SubCategoryDrawer'\nimport NewCategoryButton from './NewCategoryButton'\nimport Logo from './logo.svg'\nimport Typography from '@material-ui/core/Typography';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport Button from '@material-ui/core/Button'\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\nconst useStyles = makeStyles(theme => ({\n\n  drawer:{\n    width:300,\n    flexShrink:0,\n\n  },\n  drawerPaper:{\n    marginTop:0,\n    width:300,\n    backgroundColor:\"#00c3d9\",\n    borderRight:0,\n  },\n  logo:{\n    marginTop:20,\n    marginRight:40,\n    marginLeft:30,\n  },\n  navList:{\n    marginTop:110,\n\n  },\n  link:{\n    textDecoration:\"none\",\n  },\n  navButton:{\n    color:\"#ffffff\",\n    marginLeft:30\n  },\n  adminNavButton:{\n    color:\"#ffffff\",\n    marginLeft:30\n  },\n  icon:{\n    minWidth:15,\n    miHeight:15,\n    width:15,\n    height:15,\n  },\n  buttons:{\n    height:25,\n    minWidth:25,\n    width:25,\n    margin:0,\n    marginLeft:5,\n    color: \"#ffffff\",\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: 'rgba(255,255,255,0)',\n      color: '#ffffff'\n    }\n  },\n}));\n\n\nconst SideNavigationDrawer = (props) => {\n\n  const classes = useStyles();\n  const categoryRef = props.firebase.categoryRef();\n\n  const el = useRef(null); // ref to the sub nav\n\n  const [categories, setCategories] = React.useState([])\n  const [subCategoriesOpen, setSubCategoriesOpen] = React.useState(false);\n  const [selectedCategory, setSelectedCategory] = React.useState({});\n\n  const handleClick = (e) =>{\n    // close the subnav if we click away\n    if(!el.current.contains(e.target)){\n      setSubCategoriesOpen(false);\n    }\n  }\n\n  const refreshCategories = () => {\n    setCategories([]);\n\n    categoryRef.once(\"value\", (snapshot, prevChildKey) => {\n       snapshot.forEach(ss => setCategories(x => [...x, {name:ss.key, key:ss.key, visible:ss.val().visible}]) )\n              \n    })\n  }\n\n  useEffect( () => {\n\n    document.addEventListener('mousedown', handleClick, false);\n\n    const ca = categoryRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      setCategories(x => [...x, {name:snapshot.key, key:snapshot.key, visible:snapshot.val().visible}])      \n    })\n\n    const cr = categoryRef.on(\"child_removed\", (snapshot) => {\n      refreshCategories();\n\n    })\n\n    //TODO: [Functionality] Update child state\n    const cc = categoryRef.on(\"child_changed\", (snapshot) => {\n      refreshCategories();\n    })\n\n    return () => {\n      categoryRef.off(\"child_added\", ca);\n      categoryRef.off(\"child_removed\", cr);\n      categoryRef.off(\"child_changed\", cc);\n      document.removeEventListener('mousedown', handleClick, false);\n    }\n\n  }, []);\n\n  const openSubCategoryDrawer = (cat) => {\n    setSubCategoriesOpen(true);\n    setSelectedCategory(cat);\n  }\n\n  return(\n    <div ref={el}>    \n          <Drawer\n            className={classes.drawer}\n            variant=\"permanent\"\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            anchor=\"left\"\n            boxShadow={5}\n          >\n            <Link  to=\"/\" style={{ textDecoration: 'none' }}>\n              <Typography variant=\"h4\" className={classes.navButton} > Best For Rest </Typography> \n              {/* <img src={Logo} className={classes.logo} height=\"100\"/> */}\n            </Link>\n            \n\n            <List className={classes.navList} dense=\"true\">\n              { categories.map((category, index) => (\n                <AuthUserContext.Consumer key={category.key}>\n                  {authUser => {\n                    if(((!!authUser && !authUser.isAdmin) || (!!!authUser)) && category.visible)\n                      return(\n                        <ListItem button key={category.key} onClick={() => {openSubCategoryDrawer(category)}}>\n                          <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography>  \n                        </ListItem>\n                      ) \n                    else if(!!authUser && authUser.isAdmin)\n                      return(\n                        \n                          <ListItem button key={category.key} onClick={() => {openSubCategoryDrawer(category)}}>\n                            <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography> \n                              <ListItemSecondaryAction>\n                                {category.visible && <Button className={classes.buttons} onClick={(e) => {props.firebase.setCategoryVisible(category.name, null, false)}}>\n                                <VisibilityOutlinedIcon />\n                            </Button>}\n\n                            {!category.visible && <Button className={classes.buttons} onClick={(e) => {props.firebase.setCategoryVisible(category.name, null, true)}} >\n                            <VisibilityOffOutlinedIcon />\n                              \n                            </Button>}\n\n                            <Button className={classes.buttons} onClick={(e) => {props.firebase.deleteCategory(category.name, null)}} >\n                              <HighlightOffIcon />\n                            </Button>\n\n                            </ListItemSecondaryAction> \n                          </ListItem>                                                                      \n                      )\n                  }}\n                </AuthUserContext.Consumer>\n              ))}\n              <AuthUserContext.Consumer>   \n                {authUser => !!authUser && authUser.isAdmin && <NewCategoryButton/> }                \n              </AuthUserContext.Consumer> \n            </List>\n            <Divider />\n              <List >\n                <AuthUserContext.Consumer>\n                {authUser => {           \n                  if(authUser && authUser.isAdmin)\n                    return(  \n                      <React.Fragment>   \n                                \n                        <Link to={\"/archive\"} className={classes.link}>\n                          <ListItem button key=\"Archive\">             \n                          <Typography variant=\"h6\" className={classes.adminNavButton} >Архів Номерів</Typography>\n                          </ListItem>\n                        </Link>\n                        <Link to={\"/dashboard\"} className={classes.link}>\n                          <ListItem button key=\"Dashboard\">             \n                          <Typography variant=\"h6\" className={classes.adminNavButton} >Активні бронювання</Typography>\n                          </ListItem>\n                        </Link>\n                        <Link to={\"/create\"} className={classes.link} >\n                          <ListItem button key=\"New Product\">             \n                          <Typography variant=\"h6\" className={classes.adminNavButton} >Створити Новий Номер</Typography>\n                          </ListItem>\n                        </Link>\n                    </React.Fragment>  \n                    )\n                  else\n                    return(\n                      <React.Fragment>                               \n                      <Link to={\"/contact\"} className={classes.link}>\n                        <ListItem button key=\"Archive\">             \n                        <Typography variant=\"h6\" className={classes.adminNavButton} >Контакти</Typography>\n                        </ListItem>\n                      </Link>                     \n                      <Link to={\"/account\"} className={classes.link}>\n                        <ListItem button key=\"Бронювання\">             \n                        <Typography variant=\"h6\" className={classes.adminNavButton} >Обліковий запис</Typography>\n                        </ListItem>\n                      </Link>\n                      <Link to={\"/checkout\"} className={classes.link} >\n                        <ListItem button key=\"New Product\">             \n                        <Typography variant=\"h6\" className={classes.adminNavButton} >Бронювання</Typography>\n                        </ListItem>\n                      </Link>\n                  </React.Fragment>  \n                    )\n                }}\n                </AuthUserContext.Consumer>\n              </List>\n          </Drawer>  \n          <SubCategoryDrawer open={subCategoriesOpen} category={selectedCategory.name}/>\n      </div>\n  );\n}\n\nexport default compose(withAuthentication)(SideNavigationDrawer);"]},"metadata":{},"sourceType":"module"}