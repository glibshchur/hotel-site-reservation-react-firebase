{"ast":null,"code":"import _defineProperty from \"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/hshchu/Desktop/github/e-commerce/src/components/Admin/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Paper from '@material-ui/core/Paper';\nimport { withFirebase } from '../Firebase';\nimport { compose } from 'recompose';\nimport React, { useEffect, useState, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { withAuthentication, AuthUserContext, withAuthorization } from '../Session';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nconst useStyles = makeStyles({\n  st: {\n    fontSize: 12\n  },\n  table: {\n    minWidth: 650\n  },\n  grid: {\n    margin: 0,\n    padding: 0,\n    marginLeft: 0\n  },\n  paper: {\n    marginLeft: 0,\n    marginRight: 5,\n    width: '100%',\n    backgroundColor: \"rgba(0,0,0,0)\"\n  },\n  returningCustomerText: {\n    marginLeft: 15,\n    marginTop: 25,\n    marginBottom: 25\n  }\n});\n\nconst condition = authUser => !!authUser && authUser.isAdmin;\n\nconst Dashboard = compose(withAuthentication, withFirebase, withAuthorization(condition))(props => {\n  return React.createElement(AuthUserContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, authUser => React.createElement(DashboardBase, {\n    authUser: authUser,\n    firebase: props.firebase,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }));\n});\n\nconst DashboardBase = props => {\n  const classes = useStyles();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        orders = _useState2[0],\n        setOrders = _useState2[1];\n\n  const ordersRef = props.firebase.orders();\n  useEffect(() => {\n    // reset products state\n    setOrders([]);\n    const ca = ordersRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      console.log('asd');\n      setOrders(a => [...a, _objectSpread({}, snapshot.val(), {\n        key: snapshot.key\n      })]);\n    });\n    const cr = ordersRef.on(\"child_removed\", snapshot => {\n      setOrders(e => e.filter(x => x.key !== snapshot.key));\n    });\n    return () => {\n      ordersRef.off(\"child_added\", ca);\n      ordersRef.off(\"child_removed\", cr);\n    };\n  }, []);\n  return React.createElement(Paper, {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.returningCustomerText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \" \\u0414\\u0456\\u0439\\u0441\\u043D\\u0456 \\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F \")), React.createElement(Table, {\n    className: classes.table,\n    size: \"small\",\n    \"aria-label\": \"a dense table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"\\u0415\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430 \\u043F\\u043E\\u0448\\u0442\\u0430\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"\\u0411\\u0443\\u0434\\u0438\\u043D\\u043E\\u043A\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0443\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, orders.map(row => React.createElement(TableRow, {\n    key: row.key,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, row.email), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, row.productId), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.st,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"First Name : \", row.firstName), React.createElement(Typography, {\n    className: classes.st,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Last Name : \", row.lastName)), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: e => props.firebase.order(row.key).remove(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438\")))))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Admin/index.js"],"names":["Paper","withFirebase","compose","React","useEffect","useState","useRef","makeStyles","Typography","Button","withAuthentication","AuthUserContext","withAuthorization","Table","TableBody","TableCell","TableHead","TableRow","useStyles","st","fontSize","table","minWidth","grid","margin","padding","marginLeft","paper","marginRight","width","backgroundColor","returningCustomerText","marginTop","marginBottom","condition","authUser","isAdmin","Dashboard","props","firebase","DashboardBase","classes","orders","setOrders","ordersRef","ca","on","snapshot","prevChildKey","console","log","a","val","key","cr","e","filter","x","off","map","row","email","productId","firstName","lastName","order","remove"],"mappings":"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","sourcesContent":["import Paper from '@material-ui/core/Paper';\nimport {withFirebase} from '../Firebase'\nimport {compose} from 'recompose'\nimport React, { useEffect, useState, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport Button from '@material-ui/core/Button';\nimport { withAuthentication, AuthUserContext, withAuthorization } from '../Session';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst useStyles = makeStyles({\n  st:{\n    fontSize:12,\n  },\n  table: {\n    minWidth: 650,\n  },\n  grid:{\n    margin:0,\n    padding:0,\n    marginLeft:0,\n  },\n  paper: {\n    marginLeft:0,\n    marginRight:5,\n    width: '100%',\n    backgroundColor: \"rgba(0,0,0,0)\",\n  },\n  returningCustomerText:{\n    marginLeft:15,\n    marginTop:25,\n    marginBottom:25,\n  },\n});\n\nconst condition = (authUser) => !!authUser && authUser.isAdmin;\n\nconst Dashboard = compose(withAuthentication, withFirebase, withAuthorization(condition))((props) => {\n\n  return(\n   <AuthUserContext.Consumer>\n     {authUser => <DashboardBase authUser={authUser} firebase={props.firebase}/>}\n   </AuthUserContext.Consumer>\n  )\n})\n\nconst DashboardBase = (props) => {\n\n  const classes = useStyles();\n  const [orders, setOrders] = useState([]);\n\n  const ordersRef = props.firebase.orders();\n\n  useEffect( () => {\n\n    // reset products state\n    setOrders([])\n\n    const ca = ordersRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      console.log('asd');\n      setOrders(a => [...a, {...snapshot.val(), key:snapshot.key}]);  \n    })\n\n    const cr = ordersRef.on(\"child_removed\", (snapshot) => {\n      setOrders(e => e.filter(x => x.key !== snapshot.key));     \n    })\n\n    return () => {\n      ordersRef.off(\"child_added\", ca);\n      ordersRef.off(\"child_removed\", cr);\n    }\n\n  }, []);\n\n\n  return(\n    <Paper className={classes.paper}>\n          <div className={classes.returningCustomerText}>\n            <Typography variant=\"h5\" > Дійсні Бронювання </Typography>\n          </div> \n    <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"right\">Електронна пошта</TableCell>\n          <TableCell align=\"right\">Будинок</TableCell>\n          <TableCell align=\"right\">Номер телефону</TableCell> \n          <TableCell align=\"right\">Статус</TableCell>   \n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {orders.map(row => (\n          <TableRow key={row.key}>\n            <TableCell align=\"right\">{row.email}</TableCell>\n            <TableCell align=\"right\">{row.productId}</TableCell>\n            <TableCell align=\"right\">\n              <Typography className={classes.st}>First Name : {row.firstName}</Typography>\n              <Typography className={classes.st}>Last Name : {row.lastName}</Typography>\n            </TableCell>\n            <TableCell align=\"right\">\n              <Button onClick={(e) => props.firebase.order(row.key).remove()}>\n                Видалити\n              </Button>\n            </TableCell>   \n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  </Paper>\n\n  );\n\n}\n\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}