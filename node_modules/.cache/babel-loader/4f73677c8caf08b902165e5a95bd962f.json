{"ast":null,"code":"import _slicedToArray from \"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/hshchu/Desktop/github/e-commerce/src/components/Navigation/index.js\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose';\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../Session';\nimport { withFirebase } from '../Firebase';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TextField from '@material-ui/core/TextField';\nimport SubCategoryDrawer from './SubCategoryDrawer';\nimport NewCategoryButton from './NewCategoryButton';\nimport Logo from \"./logo.svg\";\nimport Typography from '@material-ui/core/Typography';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport Button from '@material-ui/core/Button';\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    width: 300,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    marginTop: 0,\n    width: 300,\n    backgroundColor: \"#00c3d9\",\n    borderRight: 0\n  },\n  logo: {\n    marginTop: 20,\n    marginRight: 40,\n    marginLeft: 30\n  },\n  navList: {\n    marginTop: 110\n  },\n  link: {\n    textDecoration: \"none\"\n  },\n  navButton: {\n    color: \"#ffffff\",\n    marginLeft: 30\n  },\n  adminNavButton: {\n    color: \"#ffffff\",\n    marginLeft: 30\n  },\n  icon: {\n    minWidth: 15,\n    miHeight: 15,\n    width: 15,\n    height: 15\n  },\n  buttons: {\n    height: 25,\n    minWidth: 25,\n    width: 25,\n    margin: 0,\n    marginLeft: 5,\n    color: \"#ffffff\",\n    borderRadius: 0,\n    '&:hover': {\n      backgroundColor: 'rgba(255,255,255,0)',\n      color: '#ffffff'\n    }\n  }\n}));\n\nconst SideNavigationDrawer = props => {\n  const classes = useStyles();\n  const categoryRef = props.firebase.categoryRef();\n  const el = useRef(null); // ref to the sub nav\n\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        categories = _React$useState2[0],\n        setCategories = _React$useState2[1];\n\n  const _React$useState3 = React.useState(false),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        subCategoriesOpen = _React$useState4[0],\n        setSubCategoriesOpen = _React$useState4[1];\n\n  const _React$useState5 = React.useState({}),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        selectedCategory = _React$useState6[0],\n        setSelectedCategory = _React$useState6[1];\n\n  const handleClick = e => {\n    // close the subnav if we click away\n    if (!el.current.contains(e.target)) {\n      setSubCategoriesOpen(false);\n    }\n  };\n\n  const refreshCategories = () => {\n    setCategories([]);\n    categoryRef.once(\"value\", (snapshot, prevChildKey) => {\n      snapshot.forEach(ss => setCategories(x => [...x, {\n        name: ss.key,\n        key: ss.key,\n        visible: ss.val().visible\n      }]));\n    });\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClick, false);\n    const ca = categoryRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      setCategories(x => [...x, {\n        name: snapshot.key,\n        key: snapshot.key,\n        visible: snapshot.val().visible\n      }]);\n    });\n    const cr = categoryRef.on(\"child_removed\", snapshot => {\n      refreshCategories();\n    }); //TODO: [Functionality] Update child state\n\n    const cc = categoryRef.on(\"child_changed\", snapshot => {\n      refreshCategories();\n    });\n    return () => {\n      categoryRef.off(\"child_added\", ca);\n      categoryRef.off(\"child_removed\", cr);\n      categoryRef.off(\"child_changed\", cc);\n      document.removeEventListener('mousedown', handleClick, false);\n    };\n  }, []);\n\n  const openSubCategoryDrawer = cat => {\n    setSubCategoriesOpen(true);\n    setSelectedCategory(cat);\n  };\n\n  return React.createElement(\"div\", {\n    ref: el,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(Drawer, {\n    className: classes.drawer,\n    variant: \"permanent\",\n    classes: {\n      paper: classes.drawerPaper\n    },\n    anchor: \"left\",\n    boxShadow: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h6\",\n    className: classes.navButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \" \", category.name, \" \")), React.createElement(List, {\n    className: classes.navList,\n    dense: \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, categories.map((category, index) => React.createElement(AuthUserContext.Consumer, {\n    key: category.key,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, authUser => {\n    if ((!!authUser && !authUser.isAdmin || !!!authUser) && category.visible) return React.createElement(ListItem, {\n      button: true,\n      key: category.key,\n      onClick: () => {\n        openSubCategoryDrawer(category);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.navButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \" \", category.name, \" \"));else if (!!authUser && authUser.isAdmin) return React.createElement(ListItem, {\n      button: true,\n      key: category.key,\n      onClick: () => {\n        openSubCategoryDrawer(category);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.navButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \" \", category.name, \" \"), React.createElement(ListItemSecondaryAction, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, category.visible && React.createElement(Button, {\n      className: classes.buttons,\n      onClick: e => {\n        props.firebase.setCategoryVisible(category.name, null, false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(VisibilityOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), !category.visible && React.createElement(Button, {\n      className: classes.buttons,\n      onClick: e => {\n        props.firebase.setCategoryVisible(category.name, null, true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(VisibilityOffOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    })), React.createElement(Button, {\n      className: classes.buttons,\n      onClick: e => {\n        props.firebase.deleteCategory(category.name, null);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(HighlightOffIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }))));\n  })), React.createElement(AuthUserContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, authUser => !!authUser && authUser.isAdmin && React.createElement(NewCategoryButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }))), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }), React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(AuthUserContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, authUser => {\n    if (authUser && authUser.isAdmin) return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/archive\",\n      className: classes.link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      key: \"Archive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.adminNavButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"\\u0410\\u0440\\u0445\\u0456\\u0432 \\u0431\\u0443\\u0434\\u0438\\u043D\\u043A\\u0456\\u0432\"))), React.createElement(Link, {\n      to: \"/dashboard\",\n      className: classes.link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      key: \"Dashboard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.adminNavButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0456 \\u0431\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F\"))), React.createElement(Link, {\n      to: \"/create\",\n      className: classes.link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      key: \"New Product\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.adminNavButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u0432\\u0438\\u0439 \\u041D\\u043E\\u043C\\u0435\\u0440\"))));else return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/contact\",\n      className: classes.link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      key: \"Archive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.adminNavButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0438\"))), React.createElement(Link, {\n      to: \"/account\",\n      className: classes.link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      key: \"\\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.adminNavButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u043B\\u0456\\u043A\\u043E\\u0432\\u0438\\u0439 \\u0437\\u0430\\u043F\\u0438\\u0441\"))), React.createElement(Link, {\n      to: \"/checkout\",\n      className: classes.link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      key: \"New Product\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.adminNavButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"\\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F\"))));\n  }))), React.createElement(SubCategoryDrawer, {\n    open: subCategoriesOpen,\n    category: selectedCategory.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }));\n};\n\nexport default compose(withAuthentication)(SideNavigationDrawer);","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Navigation/index.js"],"names":["React","useEffect","useState","useRef","BrowserRouter","Router","Link","Route","makeStyles","compose","withAuthorization","withAuthentication","AuthUserContext","withFirebase","ClickAwayListener","Drawer","List","Divider","ListItem","ListItemText","TextField","SubCategoryDrawer","NewCategoryButton","Typography","HighlightOffIcon","Button","VisibilityOffOutlinedIcon","ListItemIcon","ListItemSecondaryAction","IconButton","VisibilityOutlinedIcon","useStyles","theme","drawer","width","flexShrink","drawerPaper","marginTop","backgroundColor","borderRight","logo","marginRight","marginLeft","navList","link","textDecoration","navButton","color","adminNavButton","icon","minWidth","miHeight","height","buttons","margin","borderRadius","SideNavigationDrawer","props","classes","categoryRef","firebase","el","categories","setCategories","subCategoriesOpen","setSubCategoriesOpen","selectedCategory","setSelectedCategory","handleClick","e","current","contains","target","refreshCategories","once","snapshot","prevChildKey","forEach","ss","x","name","key","visible","val","document","addEventListener","ca","on","cr","cc","off","removeEventListener","openSubCategoryDrawer","cat","paper","category","map","index","authUser","isAdmin","setCategoryVisible","deleteCategory"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose'\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../Session'\nimport { withFirebase } from '../Firebase'\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TextField from '@material-ui/core/TextField';\nimport SubCategoryDrawer from './SubCategoryDrawer'\nimport NewCategoryButton from './NewCategoryButton'\nimport Logo from './logo.svg'\nimport Typography from '@material-ui/core/Typography';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport Button from '@material-ui/core/Button'\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\nconst useStyles = makeStyles(theme => ({\n\n  drawer:{\n    width:300,\n    flexShrink:0,\n\n  },\n  drawerPaper:{\n    marginTop:0,\n    width:300,\n    backgroundColor:\"#00c3d9\",\n    borderRight:0,\n  },\n  logo:{\n    marginTop:20,\n    marginRight:40,\n    marginLeft:30,\n  },\n  navList:{\n    marginTop:110,\n\n  },\n  link:{\n    textDecoration:\"none\",\n  },\n  navButton:{\n    color:\"#ffffff\",\n    marginLeft:30\n  },\n  adminNavButton:{\n    color:\"#ffffff\",\n    marginLeft:30\n  },\n  icon:{\n    minWidth:15,\n    miHeight:15,\n    width:15,\n    height:15,\n  },\n  buttons:{\n    height:25,\n    minWidth:25,\n    width:25,\n    margin:0,\n    marginLeft:5,\n    color: \"#ffffff\",\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: 'rgba(255,255,255,0)',\n      color: '#ffffff'\n    }\n  },\n}));\n\n\nconst SideNavigationDrawer = (props) => {\n\n  const classes = useStyles();\n  const categoryRef = props.firebase.categoryRef();\n\n  const el = useRef(null); // ref to the sub nav\n\n  const [categories, setCategories] = React.useState([])\n  const [subCategoriesOpen, setSubCategoriesOpen] = React.useState(false);\n  const [selectedCategory, setSelectedCategory] = React.useState({});\n\n  const handleClick = (e) =>{\n    // close the subnav if we click away\n    if(!el.current.contains(e.target)){\n      setSubCategoriesOpen(false);\n    }\n  }\n\n  const refreshCategories = () => {\n    setCategories([]);\n\n    categoryRef.once(\"value\", (snapshot, prevChildKey) => {\n       snapshot.forEach(ss => setCategories(x => [...x, {name:ss.key, key:ss.key, visible:ss.val().visible}]) )\n              \n    })\n  }\n\n  useEffect( () => {\n\n    document.addEventListener('mousedown', handleClick, false);\n\n    const ca = categoryRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      setCategories(x => [...x, {name:snapshot.key, key:snapshot.key, visible:snapshot.val().visible}])      \n    })\n\n    const cr = categoryRef.on(\"child_removed\", (snapshot) => {\n      refreshCategories();\n\n    })\n\n    //TODO: [Functionality] Update child state\n    const cc = categoryRef.on(\"child_changed\", (snapshot) => {\n      refreshCategories();\n    })\n\n    return () => {\n      categoryRef.off(\"child_added\", ca);\n      categoryRef.off(\"child_removed\", cr);\n      categoryRef.off(\"child_changed\", cc);\n      document.removeEventListener('mousedown', handleClick, false);\n    }\n\n  }, []);\n\n  const openSubCategoryDrawer = (cat) => {\n    setSubCategoriesOpen(true);\n    setSelectedCategory(cat);\n  }\n\n  return(\n    <div ref={el}>    \n          <Drawer\n            className={classes.drawer}\n            variant=\"permanent\"\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            anchor=\"left\"\n            boxShadow={5}\n          >\n            <Link  to=\"/\">\n              <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography> \n              {/* <img src={Logo} className={classes.logo} height=\"100\"/> */}\n            </Link>\n            \n\n            <List className={classes.navList} dense=\"true\">\n              { categories.map((category, index) => (\n                <AuthUserContext.Consumer key={category.key}>\n                  {authUser => {\n                    if(((!!authUser && !authUser.isAdmin) || (!!!authUser)) && category.visible)\n                      return(\n                        <ListItem button key={category.key} onClick={() => {openSubCategoryDrawer(category)}}>\n                          <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography>  \n                        </ListItem>\n                      ) \n                    else if(!!authUser && authUser.isAdmin)\n                      return(\n                        \n                          <ListItem button key={category.key} onClick={() => {openSubCategoryDrawer(category)}}>\n                            <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography> \n                              <ListItemSecondaryAction>\n                                {category.visible && <Button className={classes.buttons} onClick={(e) => {props.firebase.setCategoryVisible(category.name, null, false)}}>\n                                <VisibilityOutlinedIcon />\n                            </Button>}\n\n                            {!category.visible && <Button className={classes.buttons} onClick={(e) => {props.firebase.setCategoryVisible(category.name, null, true)}} >\n                            <VisibilityOffOutlinedIcon />\n                              \n                            </Button>}\n\n                            <Button className={classes.buttons} onClick={(e) => {props.firebase.deleteCategory(category.name, null)}} >\n                              <HighlightOffIcon />\n                            </Button>\n\n                            </ListItemSecondaryAction> \n                          </ListItem>                                                                      \n                      )\n                  }}\n                </AuthUserContext.Consumer>\n              ))}\n              <AuthUserContext.Consumer>   \n                {authUser => !!authUser && authUser.isAdmin && <NewCategoryButton/> }                \n              </AuthUserContext.Consumer> \n            </List>\n            <Divider />\n              <List >\n                <AuthUserContext.Consumer>\n                {authUser => {           \n                  if(authUser && authUser.isAdmin)\n                    return(  \n                      <React.Fragment>   \n                                \n                        <Link to={\"/archive\"} className={classes.link}>\n                          <ListItem button key=\"Archive\">             \n                          <Typography variant=\"h6\" className={classes.adminNavButton} >Архів будинків</Typography>\n                          </ListItem>\n                        </Link>\n                        <Link to={\"/dashboard\"} className={classes.link}>\n                          <ListItem button key=\"Dashboard\">             \n                          <Typography variant=\"h6\" className={classes.adminNavButton} >Активні бронювання</Typography>\n                          </ListItem>\n                        </Link>\n                        <Link to={\"/create\"} className={classes.link} >\n                          <ListItem button key=\"New Product\">             \n                          <Typography variant=\"h6\" className={classes.adminNavButton} >Новий Номер</Typography>\n                          </ListItem>\n                        </Link>\n                    </React.Fragment>  \n                    )\n                  else\n                    return(\n                      <React.Fragment>                               \n                      <Link to={\"/contact\"} className={classes.link}>\n                        <ListItem button key=\"Archive\">             \n                        <Typography variant=\"h6\" className={classes.adminNavButton} >Контакти</Typography>\n                        </ListItem>\n                      </Link>                     \n                      <Link to={\"/account\"} className={classes.link}>\n                        <ListItem button key=\"Бронювання\">             \n                        <Typography variant=\"h6\" className={classes.adminNavButton} >Обліковий запис</Typography>\n                        </ListItem>\n                      </Link>\n                      <Link to={\"/checkout\"} className={classes.link} >\n                        <ListItem button key=\"New Product\">             \n                        <Typography variant=\"h6\" className={classes.adminNavButton} >Бронювання</Typography>\n                        </ListItem>\n                      </Link>\n                  </React.Fragment>  \n                    )\n                }}\n                </AuthUserContext.Consumer>\n              </List>\n          </Drawer>  \n          <SubCategoryDrawer open={subCategoriesOpen} category={selectedCategory.name}/>\n      </div>\n  );\n}\n\nexport default compose(withAuthentication)(SideNavigationDrawer);"]},"metadata":{},"sourceType":"module"}