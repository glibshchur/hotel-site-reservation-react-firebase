{"ast":null,"code":"import _toConsumableArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect,useState,useRef}from'react';import{BrowserRouter as Router,Link,Route}from'react-router-dom';import{makeStyles}from'@material-ui/core/styles';import{compose}from'recompose';import{withAuthorization,withAuthentication,AuthUserContext}from'../Session';import{withFirebase}from'../Firebase';import ClickAwayListener from'@material-ui/core/ClickAwayListener';import Drawer from'@material-ui/core/Drawer';import List from'@material-ui/core/List';import Divider from'@material-ui/core/Divider';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import TextField from'@material-ui/core/TextField';import SubCategoryDrawer from'./SubCategoryDrawer';import NewCategoryButton from'./NewCategoryButton';import Logo from\"./logo.svg\";import Typography from'@material-ui/core/Typography';import HighlightOffIcon from'@material-ui/icons/HighlightOff';import Button from'@material-ui/core/Button';import VisibilityOffOutlinedIcon from'@material-ui/icons/VisibilityOffOutlined';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemSecondaryAction from'@material-ui/core/ListItemSecondaryAction';import IconButton from'@material-ui/core/IconButton';import VisibilityOutlinedIcon from'@material-ui/icons/VisibilityOutlined';var useStyles=makeStyles(function(theme){var _ref;return _ref={drawer:{width:300,flexShrink:0},drawerPaper:{marginTop:0,width:300,backgroundColor:\"#00c3d9\",borderRight:0},logo:{marginTop:20,marginRight:40,marginLeft:30},navList:{marginTop:110},link:{textDecoration:\"none\"},navButton:{color:\"#ffffff\",marginLeft:30},adminNavButton:{color:\"#ffffff\",marginLeft:30},icon:{minWidth:15,miHeight:15,width:15,height:15},buttons:{height:25,minWidth:25,width:25,margin:0,marginLeft:5,color:\"#ffffff\",borderRadius:0,'&:hover':{backgroundColor:'rgba(255,255,255,0)',color:'#ffffff'}}},_defineProperty(_ref,\"link\",{textDecoration:\"none\"}),_defineProperty(_ref,\"tempDrawerPaper\",{width:300,marginLeft:300,marginTop:38,backgroundColor:\"rgba(221,221,220, 0.92)\"}),_ref;});var SideSubCategoryDrawer=function SideSubCategoryDrawer(props){var classes=useStyles();var categoryRef=props.firebase.categoryRef();var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),categories=_React$useState2[0],setCategories=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var refreshCategories=function refreshCategories(){setCategories([]);var subCategoryRef=categoryRef.child(props.category).child(\"subCategories\");subCategoryRef.once(\"value\",function(ss,prevChildKey){ss.forEach(function(snapshot){return setCategories(function(x){return[].concat(_toConsumableArray(x),[{name:snapshot.key,key:snapshot.key,visible:snapshot.val().visible}]);});});});};useEffect(function(){if(!props.category)return;setCategories([]);var subCategoryRef=categoryRef.child(props.category).child(\"subCategories\");var ca=subCategoryRef.on(\"child_added\",function(snapshot,prevChildKey){setCategories(function(x){return[].concat(_toConsumableArray(x),[{name:snapshot.key,key:snapshot.key,visible:snapshot.val().visible}]);});});var cr=subCategoryRef.on(\"child_removed\",function(snapshot){refreshCategories();});//TODO: [Functionality] Update child state\nvar cc=subCategoryRef.on(\"child_changed\",function(snapshot){refreshCategories();});return function(){subCategoryRef.off(\"child_added\",ca);subCategoryRef.off(\"child_removed\",cr);subCategoryRef.off(\"child_changed\",cc);};},[props.category]);return React.createElement(Drawer,{open:props.open,variant:\"persistent\",classes:{paper:classes.tempDrawerPaper,modal:classes.modal}},React.createElement(List,{className:classes.navList,dense:\"true\"},categories.map(function(category,index){return React.createElement(AuthUserContext.Consumer,null,function(authUser){if((!!authUser&&!authUser.isAdmin||!!!authUser)&&category.visible)return React.createElement(Link,{className:classes.link,to:\"/store/\".concat(props.category,\"/\").concat(category.name,\"/\")},React.createElement(ListItem,{button:true,key:category.key},React.createElement(Typography,{variant:\"h6\",className:classes.navButton},\" \",category.name,\" \")));else if(!!authUser&&authUser.isAdmin)return React.createElement(Link,{className:classes.link,to:\"/store/\".concat(props.category,\"/\").concat(category.name,\"/\")},React.createElement(ListItem,{button:true,key:category.key},React.createElement(Typography,{variant:\"h6\",className:classes.navButton},\" \",category.name,\" \"),React.createElement(ListItemSecondaryAction,null,category.visible&&React.createElement(Button,{className:classes.buttons,onClick:function onClick(e){props.firebase.setCategoryVisible(props.category,category.name,false);}},React.createElement(VisibilityOutlinedIcon,null)),!category.visible&&React.createElement(Button,{className:classes.buttons,onClick:function onClick(e){props.firebase.setCategoryVisible(props.category,category.name,true);}},React.createElement(VisibilityOffOutlinedIcon,null)),React.createElement(Button,{className:classes.buttons,onClick:function onClick(e){props.firebase.deleteCategory(props.category,category.name);}},React.createElement(HighlightOffIcon,null)))));});}),React.createElement(AuthUserContext.Consumer,null,function(authUser){return!!authUser&&authUser.isAdmin&&React.createElement(NewCategoryButton,{category:props.category});})));return React.createElement(\"div\",null,React.createElement(Drawer,{open:props.open,variant:\"persistent\",classes:{paper:classes.tempDrawerPaper,modal:classes.modal}},React.createElement(List,{class:classes.navList},categories.map(function(category,index){return React.createElement(Link,{key:category.name,to:\"/store/\".concat(props.category,\"/\").concat(category.name,\"/\")},React.createElement(ListItem,{button:true,key:category.name},React.createElement(ListItemText,{primary:category.name})));}),React.createElement(NewCategoryButton,{category:props.category}))));};export default compose(withAuthentication)(SideSubCategoryDrawer);","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Navigation/SubCategoryDrawer.js"],"names":["React","useEffect","useState","useRef","BrowserRouter","Router","Link","Route","makeStyles","compose","withAuthorization","withAuthentication","AuthUserContext","withFirebase","ClickAwayListener","Drawer","List","Divider","ListItem","ListItemText","TextField","SubCategoryDrawer","NewCategoryButton","Typography","HighlightOffIcon","Button","VisibilityOffOutlinedIcon","ListItemIcon","ListItemSecondaryAction","IconButton","VisibilityOutlinedIcon","useStyles","theme","drawer","width","flexShrink","drawerPaper","marginTop","backgroundColor","borderRight","logo","marginRight","marginLeft","navList","link","textDecoration","navButton","color","adminNavButton","icon","minWidth","miHeight","height","buttons","margin","borderRadius","SideSubCategoryDrawer","props","classes","categoryRef","firebase","categories","setCategories","open","setOpen","refreshCategories","subCategoryRef","child","category","once","ss","prevChildKey","forEach","snapshot","x","name","key","visible","val","ca","on","cr","cc","off","paper","tempDrawerPaper","modal","map","index","authUser","isAdmin","e","setCategoryVisible","deleteCategory"],"mappings":"wXAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,IAAlC,CAAwCC,KAAxC,KAAqD,kBAArD,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,OAASC,iBAAT,CAA4BC,kBAA5B,CAAgDC,eAAhD,KAAuE,YAAvE,CACA,OAASC,YAAT,KAA6B,aAA7B,CAEA,MAAOC,CAAAA,iBAAP,KAA8B,qCAA9B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,C,6BAEA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,yBAAP,KAAsC,0CAAtC,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,uBAAP,KAAoC,2CAApC,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,sBAAP,KAAmC,uCAAnC,CAGA,GAAMC,CAAAA,SAAS,CAAGvB,UAAU,CAAC,SAAAwB,KAAK,wBAEhCC,MAAM,CAAC,CACLC,KAAK,CAAC,GADD,CAELC,UAAU,CAAC,CAFN,CAFyB,CAOhCC,WAAW,CAAC,CACVC,SAAS,CAAC,CADA,CAEVH,KAAK,CAAC,GAFI,CAGVI,eAAe,CAAC,SAHN,CAIVC,WAAW,CAAC,CAJF,CAPoB,CAahCC,IAAI,CAAC,CACHH,SAAS,CAAC,EADP,CAEHI,WAAW,CAAC,EAFT,CAGHC,UAAU,CAAC,EAHR,CAb2B,CAkBhCC,OAAO,CAAC,CACNN,SAAS,CAAC,GADJ,CAlBwB,CAsBhCO,IAAI,CAAC,CACHC,cAAc,CAAC,MADZ,CAtB2B,CAyBhCC,SAAS,CAAC,CACRC,KAAK,CAAC,SADE,CAERL,UAAU,CAAC,EAFH,CAzBsB,CA6BhCM,cAAc,CAAC,CACbD,KAAK,CAAC,SADO,CAEbL,UAAU,CAAC,EAFE,CA7BiB,CAiChCO,IAAI,CAAC,CACHC,QAAQ,CAAC,EADN,CAEHC,QAAQ,CAAC,EAFN,CAGHjB,KAAK,CAAC,EAHH,CAIHkB,MAAM,CAAC,EAJJ,CAjC2B,CAuChCC,OAAO,CAAC,CACND,MAAM,CAAC,EADD,CAENF,QAAQ,CAAC,EAFH,CAGNhB,KAAK,CAAC,EAHA,CAINoB,MAAM,CAAC,CAJD,CAKNZ,UAAU,CAAC,CALL,CAMNK,KAAK,CAAE,SAND,CAONQ,YAAY,CAAC,CAPP,CAQN,UAAU,CACRjB,eAAe,CAAE,qBADT,CAERS,KAAK,CAAE,SAFC,CARJ,CAvCwB,8BAoD3B,CACHF,cAAc,CAAC,MADZ,CApD2B,yCAuDhB,CACdX,KAAK,CAAC,GADQ,CAEdQ,UAAU,CAAC,GAFG,CAGdL,SAAS,CAAC,EAHI,CAIdC,eAAe,CAAC,yBAJF,CAvDgB,QAAN,CAA5B,CA+DA,GAAMkB,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,KAAD,CAAW,CACvC,GAAMC,CAAAA,OAAO,CAAG3B,SAAS,EAAzB,CAEA,GAAM4B,CAAAA,WAAW,CAAGF,KAAK,CAACG,QAAN,CAAeD,WAAf,EAApB,CAHuC,oBAKH3D,KAAK,CAACE,QAAN,CAAe,EAAf,CALG,oDAKhC2D,UALgC,qBAKpBC,aALoB,0CAMf9D,KAAK,CAACE,QAAN,CAAe,IAAf,CANe,qDAMhC6D,IANgC,qBAM1BC,OAN0B,qBASvC,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAE9BH,aAAa,CAAC,EAAD,CAAb,CAEA,GAAII,CAAAA,cAAc,CAAGP,WAAW,CAACQ,KAAZ,CAAkBV,KAAK,CAACW,QAAxB,EAAkCD,KAAlC,CAAwC,eAAxC,CAArB,CAEAD,cAAc,CAACG,IAAf,CAAoB,OAApB,CAA6B,SAACC,EAAD,CAAKC,YAAL,CAAsB,CACjDD,EAAE,CAACE,OAAH,CAAW,SAACC,QAAD,QAAcX,CAAAA,aAAa,CAAC,SAAAY,CAAC,qCAAQA,CAAR,GAAW,CAACC,IAAI,CAACF,QAAQ,CAACG,GAAf,CAAoBA,GAAG,CAACH,QAAQ,CAACG,GAAjC,CAAsCC,OAAO,CAACJ,QAAQ,CAACK,GAAT,GAAeD,OAA7D,CAAX,IAAF,CAA3B,EAAX,EAED,CAHD,EAID,CAVD,CAYA5E,SAAS,CAAE,UAAM,CAEf,GAAG,CAACwD,KAAK,CAACW,QAAV,CAAoB,OAEpBN,aAAa,CAAC,EAAD,CAAb,CAEA,GAAII,CAAAA,cAAc,CAAGP,WAAW,CAACQ,KAAZ,CAAkBV,KAAK,CAACW,QAAxB,EAAkCD,KAAlC,CAAwC,eAAxC,CAArB,CAEA,GAAMY,CAAAA,EAAE,CAAGb,cAAc,CAACc,EAAf,CAAkB,aAAlB,CAAiC,SAACP,QAAD,CAAWF,YAAX,CAA4B,CACtET,aAAa,CAAC,SAAAY,CAAC,qCAAQA,CAAR,GAAW,CAACC,IAAI,CAACF,QAAQ,CAACG,GAAf,CAAoBA,GAAG,CAACH,QAAQ,CAACG,GAAjC,CAAsCC,OAAO,CAACJ,QAAQ,CAACK,GAAT,GAAeD,OAA7D,CAAX,IAAF,CAAb,CACD,CAFU,CAAX,CAIA,GAAMI,CAAAA,EAAE,CAAGf,cAAc,CAACc,EAAf,CAAkB,eAAlB,CAAmC,SAACP,QAAD,CAAc,CAC1DR,iBAAiB,GAClB,CAFU,CAAX,CAIA;AACA,GAAMiB,CAAAA,EAAE,CAAGhB,cAAc,CAACc,EAAf,CAAkB,eAAlB,CAAmC,SAACP,QAAD,CAAc,CAC1DR,iBAAiB,GAClB,CAFU,CAAX,CAIA,MAAO,WAAM,CACXC,cAAc,CAACiB,GAAf,CAAmB,aAAnB,CAAkCJ,EAAlC,EACAb,cAAc,CAACiB,GAAf,CAAmB,eAAnB,CAAoCF,EAApC,EACAf,cAAc,CAACiB,GAAf,CAAmB,eAAnB,CAAoCD,EAApC,EACD,CAJD,CAMD,CA3BQ,CA2BN,CAACzB,KAAK,CAACW,QAAP,CA3BM,CAAT,CA6BA,MACE,qBAAC,MAAD,EAAQ,IAAI,CAAEX,KAAK,CAACM,IAApB,CAA0B,OAAO,CAAC,YAAlC,CACA,OAAO,CAAE,CACDqB,KAAK,CAAE1B,OAAO,CAAC2B,eADd,CAEDC,KAAK,CAAE5B,OAAO,CAAC4B,KAFd,CADT,EAKQ,oBAAC,IAAD,EAAM,SAAS,CAAE5B,OAAO,CAACf,OAAzB,CAAkC,KAAK,CAAC,MAAxC,EACIkB,UAAU,CAAC0B,GAAX,CAAe,SAACnB,QAAD,CAAWoB,KAAX,QACf,qBAAC,eAAD,CAAiB,QAAjB,MACG,SAAAC,QAAQ,CAAI,CACX,GAAG,CAAE,CAAC,CAACA,QAAF,EAAc,CAACA,QAAQ,CAACC,OAAzB,EAAsC,CAAC,CAAC,CAACD,QAA1C,GAAwDrB,QAAQ,CAACS,OAApE,CACE,MAEE,qBAAC,IAAD,EAAM,SAAS,CAAEnB,OAAO,CAACd,IAAzB,CAA+B,EAAE,kBAAYa,KAAK,CAACW,QAAlB,aAA8BA,QAAQ,CAACO,IAAvC,KAAjC,EACE,oBAAC,QAAD,EAAU,MAAM,KAAhB,CAAiB,GAAG,CAAEP,QAAQ,CAACQ,GAA/B,EAGE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAElB,OAAO,CAACZ,SAA5C,MAA0DsB,QAAQ,CAACO,IAAnE,KAHF,CADF,CAFF,CADF,IAaK,IAAG,CAAC,CAACc,QAAF,EAAcA,QAAQ,CAACC,OAA1B,CACH,MAEE,qBAAC,IAAD,EAAO,SAAS,CAAEhC,OAAO,CAACd,IAA1B,CAAgC,EAAE,kBAAYa,KAAK,CAACW,QAAlB,aAA8BA,QAAQ,CAACO,IAAvC,KAAlC,EACE,oBAAC,QAAD,EAAU,MAAM,KAAhB,CAAiB,GAAG,CAAEP,QAAQ,CAACQ,GAA/B,EAEE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAElB,OAAO,CAACZ,SAA5C,MAA0DsB,QAAQ,CAACO,IAAnE,KAFF,CAKI,oBAAC,uBAAD,MACGP,QAAQ,CAACS,OAAT,EAAoB,oBAAC,MAAD,EAAQ,SAAS,CAAEnB,OAAO,CAACL,OAA3B,CAAoC,OAAO,CAAE,iBAACsC,CAAD,CAAO,CAAClC,KAAK,CAACG,QAAN,CAAegC,kBAAf,CAAkCnC,KAAK,CAACW,QAAxC,CAAkDA,QAAQ,CAACO,IAA3D,CAAiE,KAAjE,EAAwE,CAA7H,EACrB,oBAAC,sBAAD,MADqB,CADvB,CAMD,CAACP,QAAQ,CAACS,OAAV,EAAqB,oBAAC,MAAD,EAAQ,SAAS,CAAEnB,OAAO,CAACL,OAA3B,CAAoC,OAAO,CAAE,iBAACsC,CAAD,CAAO,CAAClC,KAAK,CAACG,QAAN,CAAegC,kBAAf,CAAkCnC,KAAK,CAACW,QAAxC,CAAkDA,QAAQ,CAACO,IAA3D,CAAiE,IAAjE,EAAuE,CAA5H,EACtB,oBAAC,yBAAD,MADsB,CANpB,CAUF,oBAAC,MAAD,EAAQ,SAAS,CAAEjB,OAAO,CAACL,OAA3B,CAAoC,OAAO,CAAE,iBAACsC,CAAD,CAAO,CAAClC,KAAK,CAACG,QAAN,CAAeiC,cAAf,CAA8BpC,KAAK,CAACW,QAApC,CAA8CA,QAAQ,CAACO,IAAvD,EAA6D,CAAlH,EACE,oBAAC,gBAAD,MADF,CAVE,CALJ,CADF,CAFF,CA0BH,CA1CH,CADe,EAAf,CADJ,CA+CE,oBAAC,eAAD,CAAiB,QAAjB,MACG,SAAAc,QAAQ,QAAI,CAAC,CAACA,QAAF,EAAcA,QAAQ,CAACC,OAAvB,EAAkC,oBAAC,iBAAD,EAAmB,QAAQ,CAAEjC,KAAK,CAACW,QAAnC,EAAtC,EADX,CA/CF,CALR,CADF,CA4DA,MACA,gCACE,oBAAC,MAAD,EAAQ,IAAI,CAAEX,KAAK,CAACM,IAApB,CAA0B,OAAO,CAAC,YAAlC,CACA,OAAO,CAAE,CACDqB,KAAK,CAAE1B,OAAO,CAAC2B,eADd,CAEDC,KAAK,CAAE5B,OAAO,CAAC4B,KAFd,CADT,EAME,oBAAC,IAAD,EAAM,KAAK,CAAE5B,OAAO,CAACf,OAArB,EACGkB,UAAU,CAAC0B,GAAX,CAAe,SAACnB,QAAD,CAAWoB,KAAX,QACd,qBAAC,IAAD,EAAM,GAAG,CAAEpB,QAAQ,CAACO,IAApB,CAA0B,EAAE,kBAAYlB,KAAK,CAACW,QAAlB,aAA8BA,QAAQ,CAACO,IAAvC,KAA5B,EACE,oBAAC,QAAD,EAAU,MAAM,KAAhB,CAAiB,GAAG,CAAEP,QAAQ,CAACO,IAA/B,EACE,oBAAC,YAAD,EAAc,OAAO,CAAEP,QAAQ,CAACO,IAAhC,EADF,CADF,CADc,EAAf,CADH,CASE,oBAAC,iBAAD,EAAmB,QAAQ,CAAElB,KAAK,CAACW,QAAnC,EATF,CANF,CADF,CADA,CAuBD,CArID,CAwIA,cAAe3D,CAAAA,OAAO,CAACE,kBAAD,CAAP,CAA4B6C,qBAA5B,CAAf","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose'\nimport { withAuthorization, withAuthentication, AuthUserContext } from '../Session'\nimport { withFirebase } from '../Firebase'\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TextField from '@material-ui/core/TextField';\nimport SubCategoryDrawer from './SubCategoryDrawer'\nimport NewCategoryButton from './NewCategoryButton'\nimport Logo from './logo.svg'\nimport Typography from '@material-ui/core/Typography';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport Button from '@material-ui/core/Button'\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\n\n\nconst useStyles = makeStyles(theme => ({\n\n  drawer:{\n    width:300,\n    flexShrink:0,\n\n  },\n  drawerPaper:{\n    marginTop:0,\n    width:300,\n    backgroundColor:\"#00c3d9\",\n    borderRight:0,\n  },\n  logo:{\n    marginTop:20,\n    marginRight:40,\n    marginLeft:30,\n  },\n  navList:{\n    marginTop:110,\n\n  },\n  link:{\n    textDecoration:\"none\",\n  },\n  navButton:{\n    color:\"#ffffff\",\n    marginLeft:30\n  },\n  adminNavButton:{\n    color:\"#ffffff\",\n    marginLeft:30\n  },\n  icon:{\n    minWidth:15,\n    miHeight:15,\n    width:15,\n    height:15,\n  },\n  buttons:{\n    height:25,\n    minWidth:25,\n    width:25,\n    margin:0,\n    marginLeft:5,\n    color: \"#ffffff\",\n    borderRadius:0,\n    '&:hover':{\n      backgroundColor: 'rgba(255,255,255,0)',\n      color: '#ffffff'\n    }\n  },\n  link:{\n    textDecoration:\"none\"\n  },\n  tempDrawerPaper:{\n    width:300,\n    marginLeft:300,\n    marginTop:38,\n    backgroundColor:\"rgba(221,221,220, 0.92)\"\n  },\n}));\n\nconst SideSubCategoryDrawer = (props) => {\n  const classes = useStyles();\n\n  const categoryRef = props.firebase.categoryRef();\n\n  const [categories, setCategories] = React.useState([])\n  const [open, setOpen] = React.useState(true);\n\n\n  const refreshCategories = () => {\n\n    setCategories([]);\n\n    let subCategoryRef = categoryRef.child(props.category).child(\"subCategories\");\n\n    subCategoryRef.once(\"value\", (ss, prevChildKey) => {\n      ss.forEach((snapshot) => setCategories(x => [...x, {name:snapshot.key, key:snapshot.key, visible:snapshot.val().visible}]))\n            \n    })\n  }\n\n  useEffect( () => {\n\n    if(!props.category) return;\n    \n    setCategories([]);\n\n    let subCategoryRef = categoryRef.child(props.category).child(\"subCategories\");\n\n    const ca = subCategoryRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      setCategories(x => [...x, {name:snapshot.key, key:snapshot.key, visible:snapshot.val().visible}])      \n    })\n\n    const cr = subCategoryRef.on(\"child_removed\", (snapshot) => {\n      refreshCategories();\n    })\n\n    //TODO: [Functionality] Update child state\n    const cc = subCategoryRef.on(\"child_changed\", (snapshot) => {\n      refreshCategories();\n    })\n\n    return () => {\n      subCategoryRef.off(\"child_added\", ca);\n      subCategoryRef.off(\"child_removed\", cr);\n      subCategoryRef.off(\"child_changed\", cc);\n    }\n\n  }, [props.category]);\n\n  return(\n    <Drawer open={props.open} variant=\"persistent\"\n    classes={{\n            paper: classes.tempDrawerPaper,\n            modal: classes.modal\n          }}>\n            <List className={classes.navList} dense=\"true\">\n              { categories.map((category, index) => (\n                <AuthUserContext.Consumer>\n                  {authUser => {\n                    if(((!!authUser && !authUser.isAdmin) || (!!!authUser)) && category.visible)\n                      return(\n\n                        <Link className={classes.link} to={`/store/${props.category}/${category.name}/`}>\n                          <ListItem button key={category.key}>\n                            \n                            \n                            <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography>  \n                            \n                          </ListItem>\n                        </Link>\n\n                      ) \n                    else if(!!authUser && authUser.isAdmin)\n                      return(\n                        \n                        <Link  className={classes.link} to={`/store/${props.category}/${category.name}/`}>\n                          <ListItem button key={category.key}>\n                            \n                            <Typography variant=\"h6\" className={classes.navButton} > {category.name} </Typography>\n                            \n\n                              <ListItemSecondaryAction>\n                                {category.visible && <Button className={classes.buttons} onClick={(e) => {props.firebase.setCategoryVisible(props.category, category.name, false)}}>\n                                <VisibilityOutlinedIcon />\n                              \n                            </Button>}\n\n                            {!category.visible && <Button className={classes.buttons} onClick={(e) => {props.firebase.setCategoryVisible(props.category, category.name, true)}} >\n                            <VisibilityOffOutlinedIcon />\n                            </Button>}\n\n                            <Button className={classes.buttons} onClick={(e) => {props.firebase.deleteCategory(props.category, category.name)}} >\n                              <HighlightOffIcon />\n                            </Button>\n\n                            </ListItemSecondaryAction> \n                          </ListItem>\n                          </Link>                                                                       \n                      )\n                  }}\n                </AuthUserContext.Consumer>\n              ))}\n              <AuthUserContext.Consumer>   \n                {authUser => !!authUser && authUser.isAdmin && <NewCategoryButton category={props.category}/> }                \n              </AuthUserContext.Consumer> \n            </List>\n    </Drawer>\n  )\n\n  return (\n  <div>\n    <Drawer open={props.open} variant=\"persistent\"\n    classes={{\n            paper: classes.tempDrawerPaper,\n            modal: classes.modal\n          }}>\n\n      <List class={classes.navList}>\n        {categories.map((category, index) => (                          \n          <Link key={category.name} to={`/store/${props.category}/${category.name}/`}> \n            <ListItem button key={category.name}>\n              <ListItemText primary={category.name} />\n            </ListItem>\n          </Link>\n          \n        ))}\n        <NewCategoryButton category={props.category}/>\n      </List>\n\n\n    </Drawer>\n  </div>)\n}\n\n\nexport default compose(withAuthentication)(SideSubCategoryDrawer);"]},"metadata":{},"sourceType":"module"}