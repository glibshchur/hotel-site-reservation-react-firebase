{"ast":null,"code":"import _defineProperty from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/hshchu/Desktop/github/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import Paper from'@material-ui/core/Paper';import{withFirebase}from'../Firebase';import{compose}from'recompose';import React,{useEffect,useState,useRef}from'react';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Button from'@material-ui/core/Button';import{withAuthentication,AuthUserContext,withAuthorization}from'../Session';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';var useStyles=makeStyles({st:{fontSize:12},table:{minWidth:650},grid:{margin:0,padding:0,marginLeft:0},paper:{marginLeft:0,marginRight:5,width:'100%',backgroundColor:\"rgba(0,0,0,0)\"},returningCustomerText:{marginLeft:15,marginTop:25,marginBottom:25}});var condition=function condition(authUser){return!!authUser&&authUser.isAdmin;};var Dashboard=compose(withAuthentication,withFirebase,withAuthorization(condition))(function(props){return React.createElement(AuthUserContext.Consumer,null,function(authUser){return React.createElement(DashboardBase,{authUser:authUser,firebase:props.firebase});});});var DashboardBase=function DashboardBase(props){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var ordersRef=props.firebase.orders();useEffect(function(){// reset products state\nsetOrders([]);var ca=ordersRef.on(\"child_added\",function(snapshot,prevChildKey){console.log('asd');setOrders(function(a){return[].concat(_toConsumableArray(a),[_objectSpread({},snapshot.val(),{key:snapshot.key})]);});});var cr=ordersRef.on(\"child_removed\",function(snapshot){setOrders(function(e){return e.filter(function(x){return x.key!==snapshot.key;});});});return function(){ordersRef.off(\"child_added\",ca);ordersRef.off(\"child_removed\",cr);};},[]);return React.createElement(Paper,{className:classes.paper},React.createElement(\"div\",{className:classes.returningCustomerText},React.createElement(Typography,{variant:\"h5\"},\" \\u0414\\u0456\\u0439\\u0441\\u043D\\u0456 \\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F \")),React.createElement(Table,{className:classes.table,size:\"small\",\"aria-label\":\"a dense table\"},React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,{align:\"right\"},\"\\u041A\\u043B\\u0456\\u0454\\u043D\\u0442\"),React.createElement(TableCell,{align:\"right\"},\"\\u0415\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430 \\u043F\\u043E\\u0448\\u0442\\u0430\"),React.createElement(TableCell,{align:\"right\"},\"\\u041D\\u043E\\u043C\\u0435\\u0440\"),React.createElement(TableCell,{align:\"right\"},\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0443\"),React.createElement(TableCell,{align:\"right\"},\"\\u0414\\u0430\\u0442\\u0430 \\u0437\\u0430\\u0441\\u0435\\u043B\\u0435\\u043D\\u043D\\u044F\"),React.createElement(TableCell,{align:\"right\"},\"\\u0414\\u0430\\u0442\\u0430 \\u0432\\u0438\\u0441\\u0435\\u043B\\u0435\\u043D\\u043D\\u044F\"),React.createElement(TableCell,{align:\"right\"},\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"))),React.createElement(TableBody,null,orders.map(function(row){return React.createElement(TableRow,{key:row.key},React.createElement(TableCell,{align:\"right\"},React.createElement(Typography,{className:classes.st},row.userFirstName,\" \",row.userLastName)),React.createElement(TableCell,{align:\"right\"},row.email),React.createElement(TableCell,{align:\"right\"},row.roomName),React.createElement(TableCell,{align:\"right\"},React.createElement(Typography,{className:classes.st},row.phone)),React.createElement(TableCell,{align:\"right\"},React.createElement(Typography,{className:classes.st},row.resInDate)),React.createElement(TableCell,{align:\"right\"},React.createElement(Typography,{className:classes.st},row.resOutDate)),React.createElement(TableCell,{align:\"right\"},React.createElement(Button,{onClick:function onClick(e){return props.firebase.order(row.key).remove();}},\"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438\")));}))));};export default Dashboard;","map":{"version":3,"sources":["/Users/hshchu/Desktop/github/e-commerce/src/components/Admin/index.js"],"names":["Paper","withFirebase","compose","React","useEffect","useState","useRef","makeStyles","Typography","Button","withAuthentication","AuthUserContext","withAuthorization","Table","TableBody","TableCell","TableHead","TableRow","useStyles","st","fontSize","table","minWidth","grid","margin","padding","marginLeft","paper","marginRight","width","backgroundColor","returningCustomerText","marginTop","marginBottom","condition","authUser","isAdmin","Dashboard","props","firebase","DashboardBase","classes","orders","setOrders","ordersRef","ca","on","snapshot","prevChildKey","console","log","a","val","key","cr","e","filter","x","off","map","row","userFirstName","userLastName","email","roomName","phone","resInDate","resOutDate","order","remove"],"mappings":"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","sourcesContent":["import Paper from '@material-ui/core/Paper';\nimport {withFirebase} from '../Firebase'\nimport {compose} from 'recompose'\nimport React, { useEffect, useState, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport Button from '@material-ui/core/Button';\nimport { withAuthentication, AuthUserContext, withAuthorization } from '../Session';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst useStyles = makeStyles({\n  st:{\n    fontSize:12,\n  },\n  table: {\n    minWidth: 650,\n  },\n  grid:{\n    margin:0,\n    padding:0,\n    marginLeft:0,\n  },\n  paper: {\n    marginLeft:0,\n    marginRight:5,\n    width: '100%',\n    backgroundColor: \"rgba(0,0,0,0)\",\n  },\n  returningCustomerText:{\n    marginLeft:15,\n    marginTop:25,\n    marginBottom:25,\n  },\n});\n\nconst condition = (authUser) => !!authUser && authUser.isAdmin;\n\nconst Dashboard = compose(withAuthentication, withFirebase, withAuthorization(condition))((props) => {\n\n  return(\n   <AuthUserContext.Consumer>\n     {authUser => <DashboardBase authUser={authUser} firebase={props.firebase}/>}\n   </AuthUserContext.Consumer>\n  )\n})\n\nconst DashboardBase = (props) => {\n\n  const classes = useStyles();\n  const [orders, setOrders] = useState([]);\n\n  const ordersRef = props.firebase.orders();\n\n  useEffect( () => {\n\n    // reset products state\n    setOrders([])\n\n    const ca = ordersRef.on(\"child_added\", (snapshot, prevChildKey) => {\n      console.log('asd');\n      setOrders(a => [...a, {...snapshot.val(), key:snapshot.key}]);  \n    })\n\n    const cr = ordersRef.on(\"child_removed\", (snapshot) => {\n      setOrders(e => e.filter(x => x.key !== snapshot.key));     \n    })\n\n    return () => {\n      ordersRef.off(\"child_added\", ca);\n      ordersRef.off(\"child_removed\", cr);\n    }\n\n  }, []);\n\n\n  return(\n    <Paper className={classes.paper}>\n          <div className={classes.returningCustomerText}>\n            <Typography variant=\"h5\" > Дійсні Бронювання </Typography>\n          </div> \n    <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"right\">Клієнт</TableCell>\n          <TableCell align=\"right\">Електронна пошта</TableCell>\n          <TableCell align=\"right\">Номер</TableCell>\n          <TableCell align=\"right\">Номер телефону</TableCell> \n          <TableCell align=\"right\">Дата заселення</TableCell>   \n          <TableCell align=\"right\">Дата виселення</TableCell> \n          <TableCell align=\"right\">Статус</TableCell>   \n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {orders.map(row => (\n          <TableRow key={row.key}>\n            <TableCell align=\"right\">\n            <Typography className={classes.st}>{row.userFirstName} {row.userLastName}</Typography>\n              {/* <Typography className={classes.st}>Last Name : {row.lastName}</Typography> */}\n            </TableCell>\n            <TableCell align=\"right\">{row.email}</TableCell>\n            <TableCell align=\"right\">{row.roomName}</TableCell>\n            <TableCell align=\"right\">\n              <Typography className={classes.st}>{row.phone}</Typography>\n              {/* <Typography className={classes.st}>Last Name : {row.lastName}</Typography> */}\n            </TableCell>\n            <TableCell align=\"right\">\n              <Typography className={classes.st}>{row.resInDate}</Typography>\n              {/* <Typography className={classes.st}>Last Name : {row.lastName}</Typography> */}\n            </TableCell>\n            <TableCell align=\"right\">\n              <Typography className={classes.st}>{row.resOutDate}</Typography>\n              {/* <Typography className={classes.st}>Last Name : {row.lastName}</Typography> */}\n            </TableCell>\n            <TableCell align=\"right\">\n              <Button onClick={(e) => props.firebase.order(row.key).remove()}>\n                Видалити\n              </Button>\n            </TableCell>   \n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  </Paper>\n\n  );\n\n}\n\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}